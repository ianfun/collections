<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>brainfuck interpreter</title>
</head>
<body>
<script type="text/javascript">
mem = undefined;
codeptr=undefined;
ptr=undefined;
code=undefined;
function execute(c){
	code = c + '\0';
	document.getElementById('output').innerText = "output:";
	mem = new Uint8Array(200);
	ptr = 0;
	codeptr=0;
	document.getElementById('warn').innerText="";
	return interpreter();
}
function interpreter(){
	var IO = document.getElementById('output');
	var w = document.getElementById('warn');
	while (true) {
		switch (code[codeptr]) {
			case '>':
				ptr += 1;
				break;
			case '<':
				ptr -= 1;
				break;
			case '+':
				mem[ptr] += 1;
				break;
			case '-':
				mem[ptr] -= 1;
				break;
			case ',':
				mem[ptr] = prompt("input buffer").charCodeAt(0);
				break;
			case '.':
				IO.append(JSON.stringify(String.fromCharCode(mem[ptr])).slice(1, -1));
				break;
			case '[':
				codeptr += 1;
				var tmp=codeptr;
				while (mem[ptr]) {
					codeptr = tmp;
					interpreter();
				}
				while (code[codeptr]!=']') {
					codeptr+=1;
				}
				break;
			case ']':
				return undefined;
			case '\0':
				return "Done!";
			default:
				w.append("unexpect char " + code[codeptr]);
		}
		codeptr+=1;
	}
}
</script>
<textarea id="code" rows="20" cols="70">++++++++++[>+++++++>++++++++++>+++>+<<<<-]>++.>+.+++++++..+++.>++.<<+++++++++++++++.>.+++.------.--------.>+.>.</textarea>
<br>
<button onclick="execute(document.getElementById('code').value)">run</button>
<p id="warn"></p>
<pre id="output">output:</pre>
</body>
</html>

